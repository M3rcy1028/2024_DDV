<!DOCTYPE html>
<html>
    <head>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <script src="/javascripts/jquery-3.7.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

        <!-- Bootstrap CSS -->
        <link rel='stylesheet' href='/vendors/bootstrap/css/bootstrap.min.css' />
        <link rel='stylesheet' href='/vendors/bootstrap/css/bootstrap-grid.min.css' />
        <link rel='stylesheet' href='/vendors/bootstrap/css/bootstrap-reboot.min.css' />
    
        <!-- Bootstrap Icon -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
        <title>
            <%= title %>
        </title>
    
        <style>
            h2 {
                margin-bottom: 20px;
            }
    
            .read-box {
                width: 900px;
                padding: 20px;
                border-radius: 5px;
                box-shadow: 0.5px 0.5px 2px 1px #eee;
            }
    
            .board-content span {
                margin-bottom: 10px;
            }
    
            .sub-info span {
                color: gray;
            }
    
            .board-content p {
                height: 100%;
            }
    
            .btn-container {
                display: flex;
                gap: 10px; /* 버튼 간격 */
            }
            .chart-container {
                display: flex;
                justify-content: space-between;
                gap: 20px; /* Adds space between the charts */
            }
            .chart-box {
                width: 30%; /* Adjusts each chart's width */
                padding: 10px; /* Adds padding around each chart */
                box-sizing: border-box; /* Ensures padding doesn't affect chart width */
            }
            a {
                color: #00008B; /* 하이퍼링크 색을 #0000BB로 설정 */
                text-decoration: none; /* 밑줄 제거 */
            }
        </style>
    </head>
    <body>  
        <div class="header d-flex justify-content-end align-items-center">관리자 <%= rootname %>님</div>
        <nav class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <a href="/" id="home" class="me-auto p-2">
                    <img src="/images/design/weblogo.png" alt="로고" style="height: 100px;  width: 200px">
                </a>
            </div>
            <nav class="header">
                <a href="/roots/manageUsrList" class="link p-2">회원관리</a>
                <a href="/roots/manageBoardList" class="link p-2">게시판관리</a>
                <a href="/roots/manageAnalytics" class="link p-2">사이트분석</a>
            </nav>
        </nav>
        <h1 class="d-flex justify-content-center"><%= title %></h1>
        <br> <br> <br> <br>
        <!-- 표 나타내기 -->
        <div class="chart-container" style="display: flex; justify-content: space-between;">
            <div style="width:30%" class="chart-box">
                <canvas id="genderChart" width="400" height="400"></canvas>
            </div>
            <div style="width:30%" class="chart-box">
                <canvas id="trustChart" width="400" height="400"></canvas>
            </div>
            <div style="width:30%" class="chart-box">
                <canvas id="moneyChart" width="400" height="400"></canvas>
            </div>
        </div>
        <br> <br> <br> <br> <br>
        <div class="chart-container" style="display: flex; justify-content: space-between;">
            <div style="width:30%" class="chart-box">
                <canvas id="ageChart" width="400" height="400"></canvas>
            </div>
        </div>
        </body>
    </body>
    <script>
        // 성별 차트
        const ctx = document.getElementById('genderChart');
        const genderChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ["남성", "여성"],
                datasets: [{
                    label: "Gender Distribution",
                    backgroundColor: ["#00adff", "#f591c7"],
                    data: [<%= genderData.maleCount %>, <%= genderData.femaleCount %>]
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'Gender Distribution',
                    fontSize: 25
                }
            }
        });
        // 신뢰도 차트
        const ctx2 = document.getElementById('trustChart');
        const trustChart = new Chart(ctx2, {
            type: 'horizontalBar',
            data: {
                labels: [
                    "<%= trustData.ntop1 %>", 
                    "<%= trustData.ntop2 %>", 
                    "<%= trustData.ntop3 %>", 
                    "<%= trustData.ntop4 %>", 
                    "<%= trustData.ntop5 %>",
                    "<%= trustData.ntop6 %>", 
                    "<%= trustData.ntop7 %>"
                ],
                datasets: [{
                    label: "Trust Top7",
                    backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850", "#5f9ea0", "#e9967a"],
                    data: [
                        <%= trustData.top1 %>, 
                        <%= trustData.top2 %>, 
                        <%= trustData.top3 %>, 
                        <%= trustData.top4 %>, 
                        <%= trustData.top5 %>,
                        <%= trustData.top6 %>,
                        <%= trustData.top7 %>]
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                    text: 'Trust Top7',
                    fontSize: 20
                },
                scales: { xAxes: [{ ticks: { min: 0, } }] }
            }
        });
        // 돈 차트
        const ctx3 = document.getElementById('moneyChart');
        const moneyChart = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: [
                    "<%= moneyData.ntop1 %>", 
                    "<%= moneyData.ntop2 %>", 
                    "<%= trustData.ntop3 %>", 
                    "<%= moneyData.ntop4 %>", 
                    "<%= moneyData.ntop5 %>",
                    "<%= moneyData.ntop6 %>", 
                    "<%= moneyData.ntop7 %>"
                ],
                datasets: [{
                    label: "Money Top7",
                    backgroundColor: ["#b22222", "#228b22","#4b0082","#d3d3d3","#20b2aa", "#c71585", "#ffe4e1"],
                    data: [
                        <%= moneyData.top1 %>, 
                        <%= moneyData.top2 %>, 
                        <%= moneyData.top3 %>, 
                        <%= moneyData.top4 %>, 
                        <%= moneyData.top5 %>,
                        <%= moneyData.top6 %>,
                        <%= moneyData.top7 %>]
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                    text: 'Money Top7',
                    fontSize: 20
                },
                scales: { yAxes: [{ ticks: { min: 0, } }] }
            }
        });
        // 연령대 분포차트
        const ctx4 = document.getElementById('ageChart');
        const ageChart = new Chart(ctx4, {
            type: 'radar',
            data: {
                labels: [
                    "0-9", "10-19", "20-29", "30-39", "40-49", "50+"
                ],
                datasets: [
                {
                label: "usr",
                fill: true,
                backgroundColor: "rgba(255,99,132,0.2)",
                borderColor: "rgba(255,99,132,1)",
                pointBorderColor: "#fff",
                pointBackgroundColor: "rgba(255,99,132,1)",
                data: [
                    <%= ageData.age0 %>,
                    <%= ageData.age1 %>,
                    <%= ageData.age2 %>,
                    <%= ageData.age3 %>,
                    <%= ageData.age4 %>,
                    <%= ageData.age5 %>]
                }]
            },
            options: {
            title: {
                display: true,
                text: 'Distribution in Age',
                fontSize: 20
            },
            scale: {ticks: { beginAtZero:true, stepSize:1, max: <%= ageData.maxcount %>}}
            }
        });
    // 회원가입 line-chart (x전체 / y월별)
    // 게시글 조회수 top7 polar-chart (선택년도)
    // wishlist 높은 게시글 top7 douhnut chart
    </script>
</html>
